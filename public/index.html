<!DOCTYPE html>
<html>
	<head>
		<title>combine fullcalender,socket</title>
		<meta charset="utf-8">
		<script src="socket.io/socket.io.js"></script>
		<link rel="stylesheet" href="style.css" />

		<!Fullcalender includes>
		<link rel='stylesheet' href='fullcalendar.css' />
		<script src='lib/jquery.min.js'></script>
		<script src='lib/moment.min.js'></script>
		<script src='fullcalendar.js'></script>
		<!Fullcalender includes end>
		<!to use modal need bootstrap css for style and js>
		<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css" >
		<script src='lib/bootstrap/js/bootstrap.js'></script>
		<script src="client.js"></script>
	</head>


	<body>
	<h1 style="letter-spacing:4px; font-family:Fantasy; text-align:right;
color:#800000; border-bottom:double #FFFF00; width="100%"; font-size:24pt">
	Combine fullcalender and socket.io.</h1>
	

		<img src="/pictures/Tulpen.jpg" 
		alt="Kalenderkopf"
		width="100%" height ="100%">


			<input id="name" type="text" placeholder="Eventname" />
			<input id="text" type="text" placeholder="schreibe etwas..." />
			<input id="senden" type="submit" class="btn" value="senden" />
		

		<ul id="content"></ul>
		<div id='calendar'></div>

		<!http://jsfiddle.net/mccannf/AzmJv/16/  includ modal for eventcreation>
		<div id="createEventModal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
		    <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
		        <h3 id="myModalLabel1">Create Appointment</h3>
		    </div>
		    <div class="modal-body">
		    <form id="createAppointmentForm" class="form-horizontal">
		        <div class="control-group">
		            <label class="control-label" for="inputPatient">Patient:</label>
		            <div class="controls">
		                <input type="text" name="patientName" id="patientName" tyle="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[&quot;Value 1&quot;,&quot;Value 2&quot;,&quot;Value 3&quot;]">
		                  <input type="hidden" id="apptStartTime"/>
		                  <input type="hidden" id="apptEndTime"/>
		                  <input type="hidden" id="apptAllDay" />
		            </div>
		        </div>
		        <div class="control-group">
		            <label class="control-label" for="when">When:</label>
		            <div class="controls controls-row" id="when" style="margin-top:5px;">
		            </div>
		        </div>
		    </form>
		    </div>
		    <div class="modal-footer">
		        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
		        <button type="submit" class="btn btn-primary" id="submitButton">Save</button>
		    </div>
		</div>
		


		<script>
		$(document).ready(function() {

	     	var calendar = $('#calendar').fullCalendar({
		      	defaultView: 'agendaWeek',
		     	editable: true,
		        selectable: true,
		        defaultDate: '2016-09-12',
				navLinks: true, // can click day/week names to navigate views
				businessHours: true, // display business hours
		      //header and other values
		      	select: function(start, end, allDay) {
		       
		          endtime = moment(end).format('ddd, MMM do, h:mma ');
		          starttime = moment(start).format('ddd, MMM do, h:mma ');
		  
		          var mywhen = starttime + ' - ' + endtime;
		          $('#createEventModal #apptStartTime').val(start);
		          $('#createEventModal #apptEndTime').val(end);
		          $('#createEventModal #apptAllDay').val(allDay);
		          $('#createEventModal #when').text(mywhen);
		          $('#createEventModal').modal('show');
		       },
	     		events: [
					{
						id: 'availableForMeeting',
						start: '2016-12-2T10:00:00',
						end: '2016-12-2T16:00:00',
						rendering: 'background'
					},

					// red areas where no events can be dropped
					{
						start: '2016-12-24',
						end: '2016-12-31',
						overlap: false,
						rendering: 'background',
						color: '#ff9f89'
					},
				
					{
						title: 'Meeting',
						start: '2016-11-30T13:30:00',
						color: '#d50000'
					},
					{
						id: 999,
						title: 'Fechten',
						start: '2016-11-30T17:00:00',
						end: '2016-11-30T19:00:00',
						color: '#4a148c'
					},
					{
						id: 999,
						title: 'Fechten',
						start: '2016-12-01T20:00:00',
						end: '2016-12-01T22:00:00',
						color: '#4a148c'
					},
					{
						title: 'Gospel singen',
						start: '2016-11-29T17:30:00',
						url: 'https://www.facebook.com/GOSPELFORUMStuttgart/?fref=ts',
						end: '2016-11-29T19:30:00',
						color: '#f4511e'
					}
					
				]
			
    	   		 // put your options and callbacks here
    		
			});
  

	  $('#submitButton').on('click', function(e){
	    // We don't want this to act as a link so cancel the link action
	    e.preventDefault();

	    doSubmit();
	  });

	  function doSubmit(){
	    $("#createEventModal").modal('hide');
	    console.log($('#apptStartTime').val());
	    console.log($('#apptEndTime').val());
	    console.log($('#apptAllDay').val());
	    alert("form submitted");
	        
	    $("#calendar").fullCalendar('renderEvent',
	        {
	            title: $('#patientName').val(),
	            start: new Date($('#apptStartTime').val()),
	            end: new Date($('#apptEndTime').val()),
	            allDay: ($('#apptAllDay').val() == "true"),
	        },
	        true);
	   }
	});
			
		</script>




		<style>
	body {
		margin: 40px 10px;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}
	//calendar size
	#calendar {
		max-height: $(window).height()/2;
		//max-width:  $(window).width();
		margin: 0 auto;
	}


	</body>
</html>